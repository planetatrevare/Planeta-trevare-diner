<!doctype html><html lang="es"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Admin — Planeta Trevare</title>
<style>
/* mismo sistema visual que index */
:root{--bg:#0f1116;--panel:#141824;--ink:#e8ebf2;--muted:#b6bdcc;--brand:#e21e2b;--brand2:#b01721}
*{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
.container{max-width:1100px;margin:0 auto;padding:0 16px}
.header{position:sticky;top:0;z-index:50;background:rgba(10,12,20,.92);backdrop-filter:blur(8px);border-bottom:1px solid #000}
.brand{font-weight:900}
.card{background:var(--panel);border:1px solid #000;border-radius:14px;box-shadow:0 6px 0 #000}
.card-clean{background:#121726;border:1px solid #000;border-radius:12px;box-shadow:0 4px 0 #000}
.btn{padding:.8rem 1rem;border-radius:12px;background:linear-gradient(180deg,var(--brand),var(--brand2));color:#fff;font-weight:900;border:1px solid #000;box-shadow:0 4px 0 #000;text-transform:uppercase}
.btn-ghost{padding:.55rem .9rem;border-radius:10px;background:#0d1222;color:var(--ink);border:1px solid #000;box-shadow:0 3px 0 #000}
.badge{padding:.2rem .6rem;border-radius:999px;border:1px solid #000;background:#0f172a;font-size:.8rem}
.input,select{background:#0f131d;border:1px solid #000;color:#f1f5f9;border-radius:10px;padding:.6rem .75rem}
.hr{border:none;border-top:1px dashed #000;margin:10px 0}
.grid5{display:grid;grid-template-columns:repeat(5,1fr);gap:10px}
</style>
</head><body>
<header class="header"><div class="container" style="padding:10px 0;display:flex;justify-content:space-between;align-items:center">
  <div class="brand">Panel Admin — Planeta Trevare</div>
  <div><a href="index.html" class="btn-ghost">Ver tienda</a> <a href="kds.html" class="btn-ghost">KDS</a></div>
</div></header>

<main class="container" style="margin-top:14px">
  <section class="card" style="padding:12px">
    <h2 style="margin:0 0 8px">Pedidos</h2>
    <div class="grid5">
      <div class="card-clean" style="padding:10px"><b>En espera</b><div id="col-wait"></div></div>
      <div class="card-clean" style="padding:10px"><b>Confirmado</b><div id="col-conf"></div></div>
      <div class="card-clean" style="padding:10px"><b>En preparación</b><div id="col-prep"></div></div>
      <div class="card-clean" style="padding:10px"><b>Listo</b><div id="col-ready"></div></div>
      <div class="card-clean" style="padding:10px"><b>Entregado</b><div id="col-done"></div></div>
    </div>
  </section>

  <section class="card" style="padding:12px;margin-top:12px">
    <h3 style="margin:0 0 8px">Crear pedido manual (demo)</h3>
    <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:8px">
      <input id="nm" class="input" placeholder="Nombre">
      <input id="ws" class="input" placeholder="WhatsApp (549...)">
      <input id="it" class="input" placeholder="Ítems (texto)">
      <select id="zp" class="input"><option>Retiro</option><option>Zona A</option><option>Zona B</option></select>
      <button id="mk" class="btn">Crear</button>
    </div>
  </section>
</main>

<script>
const $=s=>document.querySelector(s);
let id=1297;
const flow=["En espera","Confirmado","En preparación","Listo","Entregado"];
const cols={wait:$("#col-wait"),conf:$("#col-conf"),prep:$("#col-prep"),ready:$("#col-ready"),done:$("#col-done")};

function ticketCard(t){
  const d=document.createElement("div"); d.className="card"; d.style.padding="8px"; d.style.marginTop="8px";
  d.innerHTML=`<div style="display:flex;justify-content:space-between;align-items:center">
    <b>#${t.id}</b><span class="badge">${t.state}</span></div>
    <div style="opacity:.8">${t.name} — ${t.tel}</div>
    <div>${t.items}</div>
    <div style="display:flex;gap:8px;margin-top:6px">
      <button class="btn-ghost" data-a="next">Siguiente</button>
      <button class="btn-ghost" data-a="cancel">Cancelar</button>
      <button class="btn" data-a="whatsapp">WhatsApp</button>
    </div>`;
  d.querySelectorAll("button").forEach(b=>b.onclick=()=>act(t,b.dataset.a,d));
  return d;
}
function place(node,state){
  if(state==="En espera") cols.wait.appendChild(node);
  else if(state==="Confirmado") cols.conf.appendChild(node);
  else if(state==="En preparación") cols.prep.appendChild(node);
  else if(state==="Listo") cols.ready.appendChild(node);
  else if(state==="Entregado") cols.done.appendChild(node);
}
function act(t,a,node){
  if(a==="cancel"){ t.state="Cancelado"; node.querySelector(".badge").textContent=t.state; return; }
  if(a==="whatsapp"){
    const msg=encodeURIComponent(`Hola ${t.name}, confirmamos tu pedido #${t.id} ✅\n\n• Total: $15.000,00\n⏰ Tiempo estimado: 20 minutos\n¡Gracias por tu compra!\nPLANETA TREVARE - FAST FOOD`);
    const tel=(t.tel||"5492226502227").replace(/[^0-9]/g,"");
    window.open(`https://wa.me/${tel}?text=${msg}`,"_blank"); return;
  }
  const i=flow.indexOf(t.state); if(i<flow.length-1) t.state=flow[i+1];
  node.querySelector(".badge").textContent=t.state; place(node,t.state);
}
document.getElementById("mk").onclick=()=>{
  const t={id:++id,name:$("#nm").value||"Cliente",tel:$("#ws").value||"5492226502227",items:$("#it").value||"—",state:"En espera"};
  place(ticketCard(t),t.state);
};
</script>
</body></html>
